    @Override
    public void visitToken(DetailAST ast)
    {
        //reset counts
        Arrays.fill(counts, 0);
        countTokens(ast, 0);

        // name of this token
        final String name = TokenTypes.getTokenName(ast.getType());

        if (sumTokenCounts) {
            int total = 0;
            for (int element : limitedTokens) {
                total += counts[element - 1];
            }
            if (total < minimumNumber) {
                log(ast.getLineNo(), ast.getColumnNo(),
                        (null == minimumMessage) ? "descendant.token.sum.min"
                                : minimumMessage,
                        String.valueOf(total),
                        String.valueOf(minimumNumber), name);
            }
            if (total > maximumNumber) {
                log(ast.getLineNo(), ast.getColumnNo(),
                        (null == maximumMessage) ? "descendant.token.sum.max"
                                : maximumMessage,
                        String.valueOf(total),
                        String.valueOf(maximumNumber),
                        name);
            }
        }
        else {
            for (int element : limitedTokens) {
                final int tokenCount = counts[element - 1];
                if (tokenCount < minimumNumber) {
                    final String descendantName = TokenTypes
                            .getTokenName(element);
                    log(ast.getLineNo(), ast.getColumnNo(),
                            (null == minimumMessage) ? "descendant.token.min"
                                    : minimumMessage,
                            String.valueOf(tokenCount),
                            String.valueOf(minimumNumber),
                            name,
                            descendantName);
                }
                if (tokenCount > maximumNumber) {
                    final String descendantName = TokenTypes
                            .getTokenName(element);
                    log(ast.getLineNo(), ast.getColumnNo(),
                            (null == maximumMessage) ? "descendant.token.max"
                                    : maximumMessage,
                            String.valueOf(tokenCount),
                            String.valueOf(maximumNumber),
                            name,
                            descendantName);
                }
            }
        }
    }

