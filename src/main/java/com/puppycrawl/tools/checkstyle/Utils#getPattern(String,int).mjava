    /**
     * This is a factory method to return an Pattern object for the specified
     * regular expression and compile flags.
     * @return an Pattern object for the supplied pattern
     * @param pattern the regular expression pattern
     * @param compileFlags the compilation flags
     * @throws PatternSyntaxException an invalid pattern was supplied
     **/
    public static Pattern getPattern(String pattern, int compileFlags)
        throws PatternSyntaxException
    {
        final String key = pattern + ":flags-" + compileFlags;
        Pattern retVal = CREATED_RES.get(key);
        if (retVal == null) {
            final Pattern compiledPattern = Pattern.compile(pattern, compileFlags);
            retVal = CREATED_RES.putIfAbsent(key, compiledPattern);
            retVal = firstNonNull(retVal, compiledPattern);
        }
        return retVal;
    }

