    private static boolean isAstEqualsSafe(DetailAST expected, DetailAST actual) {
        boolean result = false;

        if (expected.getType() == actual.getType()
                && expected.getLineNo() == actual.getLineNo()
                && expected.getColumnNo() == actual.getColumnNo()) {
            if (expected.getText() == null) {
                result = actual.getText() == null;
            }
            else if (expected.getText().equals(actual.getText())) {
                result = true;
            }
        }

        if (result) {
            DetailAST childExpected = expected.getFirstChild();
            DetailAST childActual = actual.getFirstChild();
            result = isAstEquals(childExpected, childActual);
            if (result) {
                DetailAST nextSiblingExpected = expected.getNextSibling();
                DetailAST nextSiblingActual = actual.getNextSibling();
                result = isAstEquals(nextSiblingExpected, nextSiblingActual);
            }
        }

        return result;
    }

