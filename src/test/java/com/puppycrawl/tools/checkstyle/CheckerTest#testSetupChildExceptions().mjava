    @Test
    public void testSetupChildExceptions() throws Exception {
        final Checker c = new Checker();
        PackageObjectFactory factory = new PackageObjectFactory(
                new HashSet<String>(), Thread.currentThread().getContextClassLoader());
        c.setModuleFactory(factory);

        Configuration config = new DefaultConfiguration("java.lang.String");
        try {
            c.setupChild(config);
            fail("Exception is expected");
        }
        catch (CheckstyleException ex) {
            assertEquals("cannot initialize module java.lang.String "
                    + "- java.lang.String is not allowed as a child in Checker", ex.getMessage());
        }
    }

