    @Test
    public void testAllCheckstyleMessages() throws Exception {
        for (Class<?> module : CheckUtil.getCheckstyleChecks()) {
            for (Field message : CheckUtil.getCheckMessages(module)) {
                Assert.assertEquals(module.getSimpleName() + "." + message.getName()
                        + " should be 'public static final'", Modifier.PUBLIC | Modifier.STATIC
                        | Modifier.FINAL, message.getModifiers());

                // below is required for package/private classes
                if (!message.isAccessible()) {
                    message.setAccessible(true);
                }

                final String result = CheckUtil.getCheckMessage(module, message.get(null)
                        .toString());

                Assert.assertNotNull(module.getSimpleName() + " should have text for the message '"
                        + message.getName() + "'", result);
                Assert.assertFalse(
                        module.getSimpleName() + " should have non-empty text for the message '"
                                + message.getName() + "'", result.trim().isEmpty());
                Assert.assertFalse(module.getSimpleName()
                        + " should have non-TODO text for the message '" + message.getName() + "'",
                        result.trim().startsWith("TODO"));
            }
        }
    }

