    @Test
    public void testAllModulesHaveMultiThreadAnnotation() throws Exception {
        for (Class<?> module : CheckUtil.getCheckstyleModules()) {
            if (ModuleReflectionUtil.isRootModule(module)
                    || ModuleReflectionUtil.isFilterModule(module)
                    || ModuleReflectionUtil.isFileFilterModule(module)
                    || ModuleReflectionUtil.isTreeWalkerFilterModule(module)) {
                continue;
            }

            Assert.assertTrue(
                    "module '" + module.getSimpleName()
                            + "' must contain a multi-thread annotation",
                    module.isAnnotationPresent(GlobalStatefulCheck.class)
                            || module.isAnnotationPresent(FileStatefulCheck.class)
                            || module.isAnnotationPresent(StatelessCheck.class));
        }
    }

