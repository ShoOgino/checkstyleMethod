    @Test
    public void testBehaviourWithChecksAndFilters() throws Exception {
        final DefaultConfiguration checkerConfig =
                new DefaultConfiguration("configuration");
        final DefaultConfiguration treeWalkerConfig = createCheckConfig(TreeWalker.class);
        treeWalkerConfig.addChild(createCheckConfig(MemberNameCheck.class));
        final DefaultConfiguration filterConfig =
                createCheckConfig(SuppressionCommentFilter.class);
        filterConfig.addAttribute("checkCPP", "false");
        treeWalkerConfig.addChild(filterConfig);
        checkerConfig.addChild(treeWalkerConfig);
        final Checker checker = new Checker();
        checker.setModuleClassLoader(Thread.currentThread().getContextClassLoader());
        checker.configure(checkerConfig);
        checker.addListener(getBriefUtLogger());

        final File file = new File(getPath("InputTreeWalkerSuppressionCommentFilter.java"));

        final String[] expected = {
            "9:17: " + getCheckMessage(MemberNameCheck.class, "name.invalidPattern", "P",
                    "^[a-z][a-zA-Z0-9]*$"),
            "4:17: " + getCheckMessage(MemberNameCheck.class, "name.invalidPattern", "I",
                    "^[a-z][a-zA-Z0-9]*$"),
        };

        verify(checker,
                file.getPath(),
                expected);
    }

