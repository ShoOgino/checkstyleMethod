    @Test
    public void testIllegalFailBelowErrorLimit() throws Exception {
        final String illegal = "^import";
        final DefaultConfiguration checkConfig =
            createModuleConfig(RegexpCheck.class);
        checkConfig.addAttribute("format", illegal);
        checkConfig.addAttribute("illegalPattern", "true");
        checkConfig.addAttribute("errorLimit", "4");
        final String[] expected = {
            "7: " + getCheckMessage(MSG_ILLEGAL_REGEXP, illegal),
            "8: " + getCheckMessage(MSG_ILLEGAL_REGEXP, illegal),
            "9: " + getCheckMessage(MSG_ILLEGAL_REGEXP, illegal),
        };
        verify(checkConfig, getPath("InputRegexpSemantic.java"), expected);
    }

