    @Test
    public void testCacheWhenFileExternalResourceContentDoesNotChange() throws Exception {
        final DefaultConfiguration checkConfig = createModuleConfig(ImportControlCheck.class);
        checkConfig.addAttribute("file", getPath("InputImportControlOneRegExp.xml"));
        final File cacheFile = temporaryFolder.newFile();
        final Checker checker = createMockCheckerWithCache(checkConfig, cacheFile);

        final String filePath = temporaryFolder.newFile("EmptyFile.java").getPath();
        final String[] expected = CommonUtils.EMPTY_STRING_ARRAY;

        verify(checker, filePath, filePath, expected);
        // One more time to use cache.
        verify(checker, filePath, filePath, expected);

        assertTrue("External resourse is not present in cache",
                new String(Files.readAllBytes(cacheFile.toPath()),
                Charset.forName("UTF-8")).contains("InputImportControlOneRegExp.xml"));
    }

