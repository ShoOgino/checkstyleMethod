    @Test
    public void testReaderClosedAfterHeaderRead() throws Exception {
        mockStatic(Closeables.class);
        doNothing().when(Closeables.class);
        Closeables.closeQuietly(any(InputStreamReader.class));

        final DefaultConfiguration checkConfig = createModuleConfig(RegexpHeaderCheck.class);
        checkConfig.addAttribute("headerFile", getPath("InputRegexpHeader.header"));
        createChecker(checkConfig);

        //check if reader finally closed
        verifyStatic(times(2));
        Closeables.closeQuietly(any(InputStreamReader.class));
    }

