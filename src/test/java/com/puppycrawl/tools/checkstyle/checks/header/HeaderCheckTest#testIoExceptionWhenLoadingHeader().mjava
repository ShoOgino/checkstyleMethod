    @Test
    public void testIoExceptionWhenLoadingHeader() throws Exception {
        final HeaderCheck check = PowerMockito.spy(new HeaderCheck());
        PowerMockito.doThrow(new IOException("expected exception")).when(check, "loadHeader",
                anyObject());

        try {
            check.setHeader("header");
            fail("Exception expected");
        }
        catch (ConversionException ex) {
            assertTrue(ex.getCause() instanceof IOException);
            assertEquals("unable to load header", ex.getMessage());
        }
    }

