    @Test
    public void testIllegalFailAboveErrorLimit() throws Exception {
        final String illegal = "^import";
        final String error = "The error limit has been exceeded, "
            + "the check is aborting, there may be more unreported errors.";
        final DefaultConfiguration checkConfig =
            createCheckConfig(RegexpCheck.class);
        checkConfig.addAttribute("format", illegal);
        checkConfig.addAttribute("illegalPattern", "true");
        checkConfig.addAttribute("errorLimit", "3");
        final String[] expected = {
            "7: " + getCheckMessage(MSG_ILLEGAL_REGEXP, illegal),
            "8: " + getCheckMessage(MSG_ILLEGAL_REGEXP, illegal),
            "9: " + getCheckMessage(MSG_ILLEGAL_REGEXP, error + illegal),
        };
        verify(checkConfig, getPath("InputSemantic.java"), expected);
    }

