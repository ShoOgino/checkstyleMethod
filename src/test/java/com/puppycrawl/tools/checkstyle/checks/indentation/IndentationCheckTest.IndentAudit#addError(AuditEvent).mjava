        @Override
        public void addError(AuditEvent event) {
            final int line = event.getLine();
            final String message = event.getMessage();

            if (position >= comments.length) {
                fail("found a warning when none was expected for #" + position + " at line " + line
                        + " with message " + message);
            }

            final IndentComment comment = comments[position];
            position++;

            assertTrue(
                    "input expected warning #" + position + " at line " + comment.getLineNumber()
                            + " to report '" + comment.getExpectedMessage() + "' but got instead: "
                            + line + ": " + message,
                    message.endsWith(comment.getExpectedMessage()));
        }

