    /**
     * This test exists to prevent any possible regression and let of
     * https://github.com/checkstyle/checkstyle/issues/1192 to be persistent
     * event is not very obvious
     *
     * @throws Exception when smth is not expected
     */
    @Test
    public void testIsLoadableWithNoClassDefFoundError() throws Exception {
        final Set<String> imports = Sets.newHashSet();
        imports.add("java.applet.someClass");

        final ClassResolver classResolver = PowerMockito.spy(new ClassResolver(Thread
                .currentThread().getContextClassLoader(), "", imports));

        PowerMockito.doThrow(new NoClassDefFoundError("expected exception"))
                .when(classResolver, "safeLoad", anyObject());

        try {
            final boolean result = classResolver.isLoadable("someClass");
            assertFalse("result should be false", result);
        }
        catch (NoClassDefFoundError ex) {
            fail("NoClassDefFoundError is not expected");
            assertTrue(ex.getMessage().endsWith("expected exception"));
        }
    }

