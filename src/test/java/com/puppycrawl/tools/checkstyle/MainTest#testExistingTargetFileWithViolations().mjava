    @Test
    public void testExistingTargetFileWithViolations() throws Exception {

        exit.checkAssertionAfterwards(new Assertion() {
            @Override
            public void checkAssertion() throws IOException {
                final String expectedPath = getFilePath("InputMain.java");
                assertEquals(String.format(Locale.ROOT, "Starting audit...%n"
                                + "[WARN] %1$s:3:14: "
                                + "Name 'InputMain' must match pattern"
                                + " '^[a-z0-9]*$'. [TypeName]%n"
                                + "[WARN] %1$s:5:7: "
                                + "Name 'InputMainInner' must match pattern"
                                + " '^[a-z0-9]*$'. [TypeName]%n"
                                + "Audit done.%n", expectedPath),
                        systemOut.getLog());
                assertEquals("", systemErr.getLog());
            }
        });
        Main.main("-c", getPath("config-classname2.xml"),
                getPath("InputMain.java"));
    }

