    private Checker createMockCheckerWithCacheForModule(
        Class<? extends ExternalResourceHolder> mockClass) throws IOException, CheckstyleException {

        final DefaultConfiguration mockConfig = createCheckConfig(mockClass);

        final DefaultConfiguration defaultConfig = new DefaultConfiguration("defaultConfiguration");
        defaultConfig.addAttribute("cacheFile", temporaryFolder.newFile().getPath());
        defaultConfig.addChild(mockConfig);

        final Checker checker = new Checker();
        checker.setModuleClassLoader(Thread.currentThread().getContextClassLoader());
        checker.addListener(new BriefUtLogger(stream));
        checker.configure(defaultConfig);
        return checker;
    }

