    private static void verifyXmlNode(Node expected, Node actual, String path,
            BiPredicate<Node, Node> ordered) {
        if (expected == null) {
            Assert.assertNull("no node should exist: " + path, actual);
        }
        else {
            Assert.assertNotNull("node should exist: " + path, actual);
            Assert.assertEquals("node should have same name: " + path, expected.getNodeName(),
                    actual.getNodeName());
            Assert.assertEquals("node should have same type: " + path, expected.getNodeType(),
                    actual.getNodeType());

            final String newPath = path + expected.getNodeName() + "/";

            verifyXmlAttributes(expected.getAttributes(), actual.getAttributes(), newPath);

            verifyXmlNodes(expected, actual, newPath, ordered);
        }
    }

