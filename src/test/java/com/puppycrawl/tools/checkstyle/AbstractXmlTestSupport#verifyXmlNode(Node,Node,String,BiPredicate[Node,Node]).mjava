    private static void verifyXmlNode(Node expected, Node actual, String path,
            BiPredicate<Node, Node> ordered) {
        if (expected == null) {
            if (actual != null) {
                Assert.fail("no node should exist: " + path + actual.getNodeName() + "/");
            }
        }
        else {
            final String newPath = path + expected.getNodeName() + "/";

            Assert.assertNotNull("node should exist: " + newPath, actual);
            Assert.assertEquals("node should have same name: " + newPath, expected.getNodeName(),
                    actual.getNodeName());
            Assert.assertEquals("node should have same type: " + newPath, expected.getNodeType(),
                    actual.getNodeType());

            verifyXmlAttributes(expected.getAttributes(), actual.getAttributes(), newPath);

            verifyXmlNodes(expected, actual, newPath, ordered);
        }
    }

