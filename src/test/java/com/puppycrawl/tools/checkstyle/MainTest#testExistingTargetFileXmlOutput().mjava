    @Test
    public void testExistingTargetFileXmlOutput()
            throws Exception {
        exit.expectSystemExitWithStatus(0);
        exit.checkAssertionAfterwards(new Assertion() {
            public void checkAssertion() throws IOException {
                String currentPath = new File(".").getCanonicalPath();
                String expectedPath = currentPath
                        + "/src/test/resources/com/puppycrawl/tools/checkstyle/InputMain.java"
                        .replace("/", File.separator);
                final ResourceBundle compilationProperties =
                        ResourceBundle.getBundle("checkstylecompilation");
                String version = compilationProperties.getString("checkstyle.compile.version");
                assertEquals(String.format("<?xml version=\"1.0\" encoding=\"UTF-8\"?>%n"
                        + "<checkstyle version=\"" + version + "\">%n"
                        + "<file name=\""
                        + expectedPath
                        + "\">%n"
                        + "</file>%n"
                        + "</checkstyle>%n"), standardLog.getLog());
                assertEquals("", errorLog.getLog());
            }
        });
        Main.main("-c", "src/test/resources/com/puppycrawl/tools/checkstyle/config-classname.xml",
                "-f", "xml",
                "src/test/resources/com/puppycrawl/tools/checkstyle/InputMain.java");
    }

