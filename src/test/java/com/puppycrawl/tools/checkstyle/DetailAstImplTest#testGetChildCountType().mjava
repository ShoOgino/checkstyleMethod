    @Test
    public void testGetChildCountType() throws Exception {
        final DetailAstImpl root = new DetailAstImpl();
        final DetailAstImpl firstLevelA = new DetailAstImpl();
        final DetailAstImpl firstLevelB = new DetailAstImpl();

        root.setFirstChild(firstLevelA);

        final Method setParentMethod = getSetParentMethod();
        setParentMethod.invoke(firstLevelA, root);
        firstLevelA.setNextSibling(firstLevelB);

        firstLevelA.setType(TokenTypes.IDENT);
        firstLevelB.setType(TokenTypes.EXPR);

        setParentMethod.invoke(firstLevelB, root);

        assertEquals("Invalid child count", 0, firstLevelB.getChildCount(0));
        assertEquals("Invalid child count", 0, firstLevelA.getChildCount(TokenTypes.EXPR));
        assertEquals("Invalid child count", 1, root.getChildCount(TokenTypes.IDENT));
        assertEquals("Invalid child count", 1, root.getChildCount(TokenTypes.EXPR));
        assertEquals("Invalid child count", 0, root.getChildCount(0));
    }

