    @Test
    public void testCreateListenerIllegalStateException() throws Exception {
        final Method method = Main.class.getDeclaredMethod("createListener", String.class,
            String.class);
        method.setAccessible(true);
        try {
            method.invoke(null, "myformat", null);
            fail("InvocationTargetException is expected");
        }
        catch (InvocationTargetException ex) {
            final LocalizedMessage loadPropertiesMessage = new LocalizedMessage(0,
                    Definitions.CHECKSTYLE_BUNDLE, "Main.createListener",
                    new String[] {"myformat", "plain", "xml"}, null, getClass(), null);
            assertEquals("Invalid error message",
                    loadPropertiesMessage.getMessage(), ex.getCause().getLocalizedMessage());
            assertTrue("Invalid error cause",
                    ex.getCause() instanceof IllegalStateException);
        }
    }

